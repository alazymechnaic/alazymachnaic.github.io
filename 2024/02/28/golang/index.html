<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <title>alazymachine</title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_859455_eaq7v6w8ktj.css">
<meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>
<body>
<header class="header">
    <div class="header-inner">
        <div class="header-title">

        </div>
        <nav class="header-nav">
            
            <a href="/" class="header-nav-link" >
                首页
            </a>
            

            
            <a href="/archives" class="header-nav-link">
                归档
            </a>
            

            
            <a href="/tags" class="header-nav-link">
                标签
            </a>
            

            
        </nav>
    </div>
</header>
<header class="mobile-header">
    <div class="mobile-nav">
        <div class="mobile-nav-icon">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="mobile-nav-title">
            <a href="/" class="mobile-nav-title-link">alazymachine's Blog</a>
        </div>

    </div>
    <nav class="mobile-menu">
        <ul class="mobile-menu-list">
            <li class="mobile-menu-item">
                <i class="iconfont icon-home"></i>
                <a href="/" class="mobile-nav-link">首页</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-archive"></i>
                <a href="/archives" class="mobile-nav-link">归档</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-tag"></i>
                <a href="/tags" class="mobile-nav-link">标签</a>
            </li>
            <li class="mobile-menu-item">
                <i class="iconfont icon-about"></i>
                <a href="/about/" class="mobile-nav-link">关于</a>
            </li>
        </ul>
    </nav>
</header>
<div class="main">
    <div class="content-inner">
        <div class="posts">
    <article class="post-whole">
        <div class="post-title">
            <h2 class="title">Golang</h2>
            <div class="post-meta">
                <span class="post-time">2024-02-28</span>
                
                <span class="post-visit"> 阅读次数：<span id="busuanzi_value_page_pv"></span></span>
            </div>
        </div>
        <div class="post-toc" id="post-toc">
    <strong class="post-toc-title">目录</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Go-%E8%AF%AD%E8%A8%80%E5%AE%89%E5%85%A8%E5%AE%9E%E6%88%98"><span class="toc-text">Go 语言安全实战</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Go%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B"><span class="toc-text">Go语言编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="toc-text">基础语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#hello-world"><span class="toc-text">hello world</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E"><span class="toc-text">变量声明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E6%93%8D%E4%BD%9C"><span class="toc-text">指针操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%BC%E4%B9%8E%E5%8F%AF%E4%BB%A5%E5%88%A9%E7%94%A8%E7%9A%84%E7%82%B9"><span class="toc-text">似乎可以利用的点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Go%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"><span class="toc-text">Go语言的安全问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E6%B3%A8%E5%85%A5"><span class="toc-text">模板注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XSS"><span class="toc-text">XSS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C"><span class="toc-text">命令执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96"><span class="toc-text">任意文件读取</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Go%E8%AF%AD%E8%A8%80%E6%BC%8F%E6%B4%9E"><span class="toc-text">Go语言漏洞</span></a></li></ol></li></ol>
    <div class="back-to-top" id="back-to-top">
        <a href="javascript:void(0);">回到顶部</a>
    </div>
</div>
        <div class="post-content">
            <h1 id="Go-语言安全实战"><a href="#Go-语言安全实战" class="headerlink" title="Go 语言安全实战"></a>Go 语言安全实战</h1><hr>
<h2 id="Go语言编程"><a href="#Go语言编程" class="headerlink" title="Go语言编程"></a>Go语言编程</h2><h3 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h3><p>go语言本身是编译型语言，具备高效、简洁、并发能力强的特点，因此常常被用于云计算、网络服务。Go语言在执行的过程中，将Go代码转化为中间表示，并将程序的中间表示转化为目标平台的机器码。</p>
<h4 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h4><pre><code class="go">package main
import "fmt"
func main() {
    fmt.Printf("Congratulations! Go has successfully been installed on your system\n")
}
</code></pre>
<p>运行代码</p>
<pre><code class="bash"> go run hello.go 
</code></pre>
<p>拆分过程后进行代码的运行</p>
<pre><code class="bash"> go build -x hello.go  # 拆分过程实现，会产生一个名称为hello的二进制文件
</code></pre>
<p>通过gdb调试二进制文件能够看到go产生的中间语言。go语言在运行的过程中通过go的runtime与内核进行通信，runtime完成包括内存的分配等操作。</p>
<p><img src="https://alazymechnaic.oss-cn-hangzhou.aliyuncs.com/blog-page/202402281041471.png" alt="image-20240228104124390"></p>
<p>Go程序首次进入的函数是runtime.rt0_amd64，通过runtime.rt0_go函数调用main函数，并完成数据变量的初始化，CPU核心数量的获取以及全局变量m0、g0的设置。而后m0开启第一个线程。Go语言的runtime中存在优秀的线程管理机制，</p>
<ul>
<li>G：goroutine，⼀个计算任务。由需要执⾏的代码和其上下⽂组成，上下⽂包括：当前代码位置，栈顶、栈底地址，状态等。（协程）</li>
<li>M：machine，系统线程，执⾏实体，想要在 CPU 上执⾏代码，必须有线程，与 C 语⾔中的线程相同，通过系统调⽤ clone 来创建。</li>
<li>P：processor，虚拟处理器，M 必须获得 P 才能执⾏代码，否则必须陷⼊休眠(后台监控线程除外)，你也可以将其理解为⼀种 token，有这个 token，才有在物理 CPU 核⼼上执⾏的权⼒。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41000891/article/details/120463494">https://blog.csdn.net/qq_41000891/article/details/120463494</a></p>
<ul>
<li>go语言的包声明和引入包有什么区别？</li>
</ul>
<p>go语言中的每一程序都至少包含一个名为main的包。并且package main必须在文件的第一个非注释行出现，表示该文件是程序的主函数。</p>
<ul>
<li>后面的为什么还要有一个main？</li>
</ul>
<p>package main用于指定程序首先寻找的文件，func main则用于指定首次执行的函数，如果存在init函数，则先执行init函数。</p>
<h4 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h4><pre><code class="go">var age int;
age = 2
//
var age = 2
//
age := 2
</code></pre>
<p>以上三种做法都可以实现对变量的声明。</p>
<h4 id="指针操作"><a href="#指针操作" class="headerlink" title="指针操作"></a>指针操作</h4><pre><code class="go">package main
import "fmt"
func change(v *int) {
    *v = 40
}
func main() {
    a := 50 // 声明变量 a
    b := &amp;a // 产生一个指向a的指针b
    change(b) // 修改b指向内容的数据
    fmt.Println(a) // 40
}
</code></pre>
<p>在go语言中的指针操作与C语言类似，可以通过:=符号完成对变量的简单声明一个指针类型的变量。</p>
<pre><code class="go">package main

import "fmt"

func change(v *int) {
    *v = 40
}
func main() {
    var(
    a = [3]int{10,20,30}
    ptr [3]*int
    )

for i := 0; i&lt;len(a); i ++{
    ptr[i] = &amp;a[i]
    fmt.Printf("%d 0x%x\n",i+1, ptr[i])
}
fmt.Println(ptr[0]+1) // 报错：invalid operation: ptr[0] + 1 (mismatched types *int and int)
}
</code></pre>
<p>在上述过程中能够看到，Go语言只能对程序中的int*类型的变量做解引用操作，且与C语言不同，指针本身并不能像数值一样直接运算。</p>
<pre><code class="go">package main

import "fmt"
// import "unsafe"
func change(v *int) {
    *v = 40
}
func main() {
    var(
    a = [3]int{10,20,30}
    ptr [3]*int
    )

for i := 0; i&lt;len(a); i ++{
    ptr[i] = &amp;a[i]
    fmt.Printf("%d 0x%x\n",i+1, ptr[i])
}
fmt.Println(*ptr[0])
intVal := int(uintptr(unsafe.Pointer(ptr[0])))
intVal += 8
ptr2 := (*int)(unsafe.Pointer(uintptr(intVal)))
fmt.Println(*(ptr2)) // 报错 unsafe
}
</code></pre>
<p>由于Go语言的特性，直接读取给定地址的内容是不允许的，因为Go语言具有内存安全性和类型安全性的限制。Go语言的内存访问是受限制的，不能直接操纵指针或进行低级别的内存操作。直接将数字转化为指针是不安全的，因此编译都不会通过。</p>
<h3 id="似乎可以利用的点"><a href="#似乎可以利用的点" class="headerlink" title="似乎可以利用的点"></a>似乎可以利用的点</h3><p>Go语言中如果将代码写在同一行是没问题的，但是需要使用分号隔开。在进行模本注入的过程中可以考虑使用该方法。	</p>
<h2 id="Go语言的安全问题"><a href="#Go语言的安全问题" class="headerlink" title="Go语言的安全问题"></a>Go语言的安全问题</h2><p><a target="_blank" rel="noopener" href="https://tyskill.github.io/posts/gossti/">https://tyskill.github.io/posts/gossti/</a></p>
<p><a target="_blank" rel="noopener" href="https://bycsec.top/2021/02/07/golang%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/">https://bycsec.top/2021/02/07/golang%E7%9A%84%E4%B8%80%E4%BA%9B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/</a></p>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/13674?time__1311=mqmxnQ0QeDqGuD05d4+xCqklWoqxAK5x&amp;alichlgref=https://www.google.com.hk/">https://xz.aliyun.com/t/13674?time__1311=mqmxnQ0QeDqGuD05d4%2BxCqklWoqxAK5x&amp;alichlgref=https%3A%2F%2Fwww.google.com.hk%2F</a></p>
<h3 id="模板注入"><a href="#模板注入" class="headerlink" title="模板注入"></a>模板注入</h3><h3 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h3><h3 id="命令执行"><a href="#命令执行" class="headerlink" title="命令执行"></a>命令执行</h3><h3 id="任意文件读取"><a href="#任意文件读取" class="headerlink" title="任意文件读取"></a>任意文件读取</h3><h2 id="Go语言漏洞"><a href="#Go语言漏洞" class="headerlink" title="Go语言漏洞"></a>Go语言漏洞</h2><p><a target="_blank" rel="noopener" href="https://pkg.go.dev/vuln/list">https://pkg.go.dev/vuln/list</a></p>

        </div>
        
        <div class="post-tag">
            
            <a class="tag" href="/tags/go/" title="go">go</a>
            
        </div>
        
    </article>
</div>
<div class="paginator">
    
        
        
            <a class="next" href="/2024/01/07/overleaf/">
                <span class="nav-default">overleaf</span>
                <span class="nav-mobile">下一篇</span>
                <i class="iconfont icon-next"></i>
            </a>
        
    
</div>
<div id="comment-container"></div>
    </div>
</div>
<footer class="footer-social">
    

    

    

    <div class="footer-copyright">
        <p class="time-line">
            &copy;
            
            
            2024
            &nbsp;<i class="iconfont icon-heart"></i>&nbsp;
            <a target="_blank" href="https://github.com/iJinxin">alazymachine</a>
        </p>
        <p class="theme-info">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme -
            <a target="_blank" href="https://github.com/iJinxin/hexo-theme-sky">Sky</a>
        </p>
    </div>
</footer>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
    

</script>
</html>
